<!DOCTYPE html>
<html lang="{{ site.lang | default: 'ja' }}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="baseurl" content="{{ site.baseurl }}">
  
  {% seo %}
  
  <!-- Critical CSS for faster mobile loading -->
  <style>
    /* Critical CSS */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Noto Sans JP', sans-serif; background-color: #0a0a0a; color: #ffffff; }
    body.blog-page { background-color: #ffffff; color: #374151; }
    .site-header { position: fixed; top: 0; left: 0; right: 0; z-index: 1000; background: rgba(10, 10, 10, 0.8); backdrop-filter: blur(10px); }
    body.blog-page .site-header { background: #1e3a8a; border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
    body.blog-page .nav-link { color: #ffffff !important; }
    .navbar { padding: 1rem 0; }
    .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
    .btn { display: inline-block; padding: 0.75rem 2rem; border: none; border-radius: 9999px; font-weight: 600; text-decoration: none; cursor: pointer; transition: all 0.3s ease; }
    .btn-primary { background: linear-gradient(135deg, #8b5cf6, #ec4899); color: #ffffff; }
    @media (max-width: 768px) { .container { padding: 0 15px; } }
  </style>
  
  <link rel="stylesheet" href="{{ '/assets/css/styles.css' | relative_url }}">
  <!-- Fallback for direct main.css -->
  <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
  <!-- Additional fallback with absolute path for GitHub Pages -->
  <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/main.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700;900&display=swap" rel="stylesheet">
  
  {% if site.google_analytics and jekyll.environment == 'production' %}
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id={{ site.google_analytics }}"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '{{ site.google_analytics }}');
  </script>
  {% endif %}
</head>
<body{% if page.url contains '/blog/' %} class="blog-page"{% endif %}>
  {% include header.html %}
  
  <main>
    {{ content }}
  </main>
  
  {% include footer.html %}
  
  <!-- Contact Modal -->
  <div id="contact-modal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeContactModal()">&times;</span>
      <div class="modal-header">
        <h2>お問い合わせ</h2>
        <p>お気軽にご相談ください。1-2営業日以内にご返信いたします。</p>
      </div>
      <div class="modal-body">
        <form id="contactModalForm" class="contact-form" action="https://formspree.io/f/xkgwrrqv" method="POST">
          <div class="form-row">
            <div class="form-group">
              <label for="modal-company">会社名 <span class="required">*</span></label>
              <input type="text" id="modal-company" name="company" required placeholder="株式会社〇〇">
            </div>
            <div class="form-group">
              <label for="modal-name">お名前 <span class="required">*</span></label>
              <input type="text" id="modal-name" name="name" required placeholder="山田 太郎">
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="modal-email">メールアドレス <span class="required">*</span></label>
              <input type="email" id="modal-email" name="email" required placeholder="example@company.com">
            </div>
            <div class="form-group">
              <label for="modal-phone">電話番号</label>
              <input type="tel" id="modal-phone" name="phone" placeholder="06-1234-5678">
            </div>
          </div>
          
          <div class="form-group">
            <label for="modal-inquiry-type">お問い合わせ種別 <span class="required">*</span></label>
            <select id="modal-inquiry-type" name="inquiry_type" required>
              <option value="">選択してください</option>
              <option value="service">サービスについて</option>
              <option value="consultation">無料相談の申し込み</option>
              <option value="quotation">見積もり依頼</option>
              <option value="other">その他</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="modal-message">お問い合わせ内容 <span class="required">*</span></label>
            <textarea id="modal-message" name="message" rows="5" required placeholder="お問い合わせ内容をご記入ください"></textarea>
          </div>
          
          <div class="form-group checkbox-group">
            <label>
              <input type="checkbox" name="privacy" value="agreed" required>
              <span><a href="{{ '/privacy/' | relative_url }}" target="_blank">プライバシーポリシー</a>に同意する</span>
            </label>
          </div>
          
          <button type="submit" class="btn btn-primary btn-large">送信する</button>
        </form>
      </div>
    </div>
  </div>
  
  <!-- AI Analysis Modal -->
  <div id="ai-analysis-modal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeAIAnalysis()">&times;</span>
      <h2 style="text-align: center;">無料AI分析診断</h2>
      <p style="text-align: center;">あなたのビジネスに最適な戦略を30秒で診断します</p>
      
      <form class="ai-analysis-form">
        <div class="form-group">
          <label for="business-type">業種を選択してください</label>
          <select id="business-type" name="business-type" required>
            <option value="">選択してください</option>
            <option value="ec">EC・オンライン販売</option>
            <option value="retail">実店舗・小売</option>
            <option value="service">サービス業</option>
            <option value="btob">BtoB・法人向け</option>
            <option value="beauty">美容・サロン</option>
            <option value="consulting">コンサルティング</option>
            <option value="other">その他</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="monthly-revenue">月間売上規模</label>
          <select id="monthly-revenue" name="monthly-revenue" required>
            <option value="">選択してください</option>
            <option value="under-100">100万円未満</option>
            <option value="100-500">100万円〜500万円</option>
            <option value="500-1000">500万円〜1000万円</option>
            <option value="1000-5000">1000万円〜5000万円</option>
            <option value="over-5000">5000万円以上</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="main-challenge">最も大きな課題</label>
          <select id="main-challenge" name="main-challenge" required>
            <option value="">選択してください</option>
            <option value="traffic">集客・アクセス数の不足</option>
            <option value="conversion">成約率・CVRの低さ</option>
            <option value="retention">リピーター・LTV向上</option>
            <option value="cost">広告費・獲得コストの高騰</option>
            <option value="analysis">データ分析・改善方法</option>
            <option value="automation">業務効率・自動化</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="email">メールアドレス（結果送信用）</label>
          <input type="email" id="email" name="email" placeholder="example@company.com" required>
        </div>
        
        <div style="text-align: center;">
          <button type="submit" class="btn btn-primary btn-large">
            無料で診断結果を受け取る
          </button>
        </div>
      </form>
      
      <p class="privacy-note">
        ※診断結果は入力いただいたメールアドレスに送信されます<br>
        ※個人情報は厳重に管理し、第三者に提供することはありません
      </p>
    </div>
  </div>
  
  <style>
  .ai-analysis-form {
    margin-top: 2rem;
  }
  
  .ai-analysis-form .form-group {
    margin-bottom: 1.5rem;
  }
  
  .ai-analysis-form .form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 600;
    color: #fff;
  }
  
  .ai-analysis-form .form-group select,
  .ai-analysis-form .form-group input {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.1);
    color: #fff;
    font-size: 1rem;
  }
  
  .ai-analysis-form .form-group select:focus,
  .ai-analysis-form .form-group input:focus {
    outline: none;
    border-color: #8b5cf6;
    box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);
  }
  
  .ai-analysis-form .form-group option {
    background: #1f2937;
    color: #fff;
  }
  
  .privacy-note {
    font-size: 0.75rem;
    color: #9ca3af;
    text-align: center;
    margin-top: 1rem;
    line-height: 1.4;
  }
  
  @media (max-width: 768px) {
    .modal-content {
      width: 95%;
      margin: 10% auto;
      padding: 1.5rem;
    }
    
    .ai-analysis-form .form-group select,
    .ai-analysis-form .form-group input {
      padding: 0.5rem;
      font-size: 0.875rem;
    }
  }
  </style>
  
  <script src="{{ site.baseurl }}/assets/js/main.js"></script>
  <script src="{{ site.baseurl }}/assets/js/contact-modal.js"></script>
</body>
</html>